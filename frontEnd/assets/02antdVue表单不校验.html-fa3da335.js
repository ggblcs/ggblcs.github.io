import{_ as n,p as a,q as s,a1 as t}from"./framework-96b046e1.js";const o={},p=t(`<h1 id="_02-antdvue表单不校验" tabindex="-1"><a class="header-anchor" href="#_02-antdvue表单不校验" aria-hidden="true">#</a> 02 antdVue表单不校验</h1><p>antdVue表单不校验问题</p><ol><li>formItem 上需要有rule校验规则。有name属性（与<code>input</code> <code>v-model</code>绑定值对应）</li><li>表单自定义校验触发时机，antdVue官网最下面目录写的。 <ol><li>写校验规则。</li><li>写form数据对象。</li><li>对应起来，用useForm。</li><li>用<code>v-bind=&quot;validateInfors.useXXX&quot;</code> 与form关联。</li></ol></li></ol><hr><p>下面忘了写的啥了，看不懂了。(主要是表达每次提交都要重新获取一次validateInfo)</p><p>解决了父子组件的响应式问题，表单校验都解决。</p><ol><li>外部声明<code>obj = reactive({data:xx})</code>。</li><li>每次提交都重新获取validInfo，并赋值给<code>obj.data</code>。</li><li>绑定到<code>form-item</code>的<code>v-bind</code>上。</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">handleOk</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> resetFields<span class="token punctuation">,</span> validate<span class="token punctuation">,</span> validateInfos <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useForm</span><span class="token punctuation">(</span>formState<span class="token punctuation">.</span>data<span class="token punctuation">,</span> rulesRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
validateInfoObj<span class="token punctuation">.</span>data <span class="token operator">=</span> validateInfos<span class="token punctuation">;</span>
<span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;handleOKFather&#39;</span><span class="token punctuation">,</span> <span class="token function">toRaw</span><span class="token punctuation">(</span>formState<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,8),e=[p];function c(i,l){return a(),s("div",null,e)}const d=n(o,[["render",c],["__file","02antdVue表单不校验.html.vue"]]);export{d as default};
